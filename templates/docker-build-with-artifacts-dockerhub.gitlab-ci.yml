variables:
  PIPES_VERSION: latest
  PARENT_DOWNLOAD_ARTIFACTS: "build"

stages:
  - prepare
  - docker
  - post

include:
  - project: devops/pipes
    file: /templates/docker-build-dockerhub.gitlab-ci.yml

prepare:
  stage: prepare
  image: cenk1cenk2/pipe-gl-artifacts:${PIPES_VERSION}
  script:
    - pipe
  artifacts:
    paths:
      - dist/
      - "**/dist/"
  tags:
    - docker
  rules:
    - if: $PARENT_DOWNLOAD_ARTIFACTS
