variables:
  GO_IMAGE: alpine
  GO_LINT_COMMAND: ""

lint:
  stage: build
  image: golang:$GO_IMAGE
  script:
    - apk add --no-cache --no-progress git
    - wget -O- -nv https://taskfile.dev/install.sh | sh /dev/stdin -d -b /usr/bin
    - wget -O- -nv https://raw.githubusercontent.com/golangci/golangci-lint/master/install.sh | BINDIR=/usr/bin sh -s
    - $GO_LINT_COMMAND
  tags:
    - docker
  rules:
    - if: $GO_LINT_COMMAND
